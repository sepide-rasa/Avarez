@using Ext.Net.MVC
@using Hogaf.ExtNet.UX
@using Ext.Net;
@{
    var X = Html.X();
}
<script src="~/Scripts/accounting.js"></script>
@(Html.X().Window().Modal(true).Listeners(li => li.AfterRender.Handler = "LoadPic();")
    .Width(600)
    .Title("نمایش")
    .ID("ShowPic")
    .Closable(true)
    .CloseAction(Ext.Net.CloseAction.Destroy)
    .Items(
        X.FormPanel().Border(false)
        .Border(false).ButtonAlign(Ext.Net.Alignment.Center)

        .DefaultButton("btn")
        .TitleAlign(Ext.Net.TitleAlign.Center)
               .Buttons(
                            X.Button().Text("خروج").Icon(Ext.Net.Icon.DoorOut)//.ToolTip("کلید میانبر Esc")
                                                .OnClientClick("App.ShowPic.destroy()"))


                .Items(
                X.Panel().Border(false)

            .Items(
                X.FieldSet().Border(false)
                .Center()
                .LayoutConfig(new Ext.Net.TableLayoutConfig { Columns = 1 })
                    .Defaults(new { Margin = 10 })
                .Items(
                X.Container().Content(@<div><img id="Image" style="width:500px;height:520px;border:initial" /></div>)
)

                )
                    .Layout(Ext.Net.LayoutType.VBox)
                    .LayoutConfig(new Ext.Net.VBoxLayoutConfig { Align = Ext.Net.VBoxAlign.Center })
)
        )
)


<script type="text/javascript">

    function LoadPic() {
        var originalSrc = '@Url.Content("~/Dashboard/Show")';
        var antiCachePart = (new Date()).getTime();
        var newSrc = originalSrc + '?id=' + '@ViewBag.Id';
        $("#Image").attr('src', newSrc);
    }


</script>